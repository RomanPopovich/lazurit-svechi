const p=()=>{document.querySelectorAll(".light").forEach(t=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(t.classList.remove("light"),t.classList.add("dark"))})},v=()=>{const s=document.querySelector(".header__btn"),t=document.querySelector(".header__menu");s.addEventListener("click",()=>{s.classList.toggle("is-open"),t.classList.toggle("is-open")})},f=()=>{const s=document.querySelector(".preview__img--wrapper");if(!s){console.warn("Элементы не найдены");return}const t=new IntersectionObserver(o=>{o.forEach(c=>{c.isIntersecting&&window.innerWidth>=1025&&(c.target.classList.add("is-animate"),t.unobserve(c.target)),c.isIntersecting&&window.innerWidth<=1024&&(c.target.classList.add("is-animate-mobile"),t.unobserve(c.target))})});t.observe(s)},h=()=>{const s=document.querySelectorAll(".question-answer");s.forEach(t=>{t.addEventListener("toggle",()=>{t.querySelector(".question__icon").classList.toggle("is-open"),t.open&&s.forEach(c=>{c!==t&&c.open&&(c.open=!1)})})})},_=()=>{const s=document.querySelector(".slider-product__main--wrapper"),t=document.querySelector(".slider-product__gallery"),o=s.getAttribute("data-image");if(!o)return;function c(){try{const a=document.querySelector("[data-js-name-product-page]").textContent;JSON.parse(o).forEach((l,e)=>{const n=document.createElement("div"),i=document.createElement("div");n.className="slider-product__miniature",i.className="slider-product__main--image";const d=document.createElement("img"),u=document.createElement("img");d.src=l,d.alt=`${a}-миниатюра-${e+1}`,u.src=l,u.alt=`${a}-слайд-${e+1}`,n&&e===0&&n.classList.add("is-active"),i&&e===0&&i.classList.add("is-active"),n.appendChild(d),i.appendChild(u),t.appendChild(n),s.appendChild(i)})}catch(r){console.log("Error parsing JSON:",r)}}function g(){const r=document.querySelectorAll(".slider-product__main--image"),a=document.querySelectorAll(".slider-product__miniature"),m=document.querySelector(".slider-product__btn--back"),l=document.querySelector(".slider-product__btn--forward");let e=0;function n(i){r[i].classList.remove("is-active"),a[i].classList.remove("is-active")}l.addEventListener("click",()=>{n(e),e<r.length-1?e+=1:e=0,r[e].classList.add("is-active"),a[e].classList.add("is-active")}),m.addEventListener("click",()=>{n(e),e!==0?e-=1:e=r.length-1,r[e].classList.add("is-active"),a[e].classList.add("is-active")}),a.forEach((i,d)=>{i.addEventListener("click",()=>{n(e),e=d,r[e].classList.add("is-active"),a[e].classList.add("is-active")})})}c(),g()};p();v();f();h();_();
