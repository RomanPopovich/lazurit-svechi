const p=()=>{document.querySelectorAll(".light").forEach(s=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&(s.classList.remove("light"),s.classList.add("dark"))})},v=()=>{const n=document.querySelector(".header__btn"),s=document.querySelector(".header__menu");n.addEventListener("click",()=>{n.classList.toggle("is-open"),s.classList.toggle("is-open")})},h=()=>{const n=document.querySelector(".preview__img--wrapper"),s=document.querySelector(".preview__text"),o=document.querySelector(".preview__footer");if(!n||!s){console.warn("Элементы не найдены");return}const a=s.textContent;s.textContent="";function m(e){return new Promise(i=>{let t=0;setTimeout(()=>{const d=setInterval(()=>{t<e.length?(s.textContent+=e[t],t++,window.innerWidth<=1024&&s.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})):(clearInterval(d),i())},10)},1700)})}const r=(e,i)=>{e.forEach(t=>{setTimeout(()=>{t.isIntersecting&&window.innerWidth>=1025&&(t.target.classList.add("is-animate"),i.unobserve(t.target))},200),t.isIntersecting&&window.innerWidth<=1024&&(t.target.classList.add("is-animate-mobile"),i.unobserve(t.target))})},c=(e,i)=>{e.forEach(t=>{t.isIntersecting&&(m(a).then(()=>{o&&o.classList.add("is-animate")}),i.unobserve(t.target))})},u=new IntersectionObserver(r,{threshold:.1}),l=new IntersectionObserver(c,{threshold:.1});setTimeout(()=>{u.observe(n)},500),l.observe(s)},f=()=>{const n=document.querySelectorAll(".question-answer");n.forEach(s=>{s.addEventListener("toggle",()=>{s.querySelector(".question__icon").classList.toggle("is-open"),s.open&&n.forEach(a=>{a!==s&&a.open&&(a.open=!1)})})})},w=()=>{const n=document.querySelector(".slider-product__main--wrapper"),s=document.querySelector(".slider-product__gallery"),o=n.getAttribute("data-image");if(!o)return;function a(){try{const c=document.querySelector("[data-js-name-product-page]").textContent;JSON.parse(o).forEach((l,e)=>{const i=document.createElement("div"),t=document.createElement("div");i.className="slider-product__miniature",t.className="slider-product__main--image";const d=document.createElement("img"),g=document.createElement("img");d.src=l,d.alt=`${c}-миниатюра-${e+1}`,g.src=l,g.alt=`${c}-слайд-${e+1}`,i&&e===0&&i.classList.add("is-active"),t&&e===0&&t.classList.add("is-active"),i.appendChild(d),t.appendChild(g),s.appendChild(i),n.appendChild(t)})}catch(r){console.log("Error parsing JSON:",r)}}function m(){const r=document.querySelectorAll(".slider-product__main--image"),c=document.querySelectorAll(".slider-product__miniature"),u=document.querySelector(".slider-product__btn--back"),l=document.querySelector(".slider-product__btn--forward");let e=0;function i(t){r[t].classList.remove("is-active"),c[t].classList.remove("is-active")}l.addEventListener("click",()=>{i(e),e<r.length-1?e+=1:e=0,r[e].classList.add("is-active"),c[e].classList.add("is-active")}),u.addEventListener("click",()=>{i(e),e!==0?e-=1:e=r.length-1,r[e].classList.add("is-active"),c[e].classList.add("is-active")}),c.forEach((t,d)=>{t.addEventListener("click",()=>{i(e),e=d,r[e].classList.add("is-active"),c[e].classList.add("is-active")})})}a(),m()};p();v();h();f();w();
